{% extends "index.html" %}
{% block content %}
<div class="col s12 m3 l12 login-card">
    <div class="card add-book-card">
        <div class="card-content">
            <h4>Lend Book</h4>
            <div class="add-form">
                <form class="book-add" method="post">
                   {% csrf_token %}
                   {{ form }}
                    <label for="id_borrowed_date">Date Borrowed: </label>
                    <input id = "id_borrowed_date" type="date" name="borrowed_date" value="{{ current_borrowed_date }}">
                    <label for="id_due_date">Due Date: </label>
                    <input id = "id_due_date" type="date" name="due_date" value="{{ book.due_date_save }}">
                   <button class="btn waves-effect waves-light lend-button" type="submit" name="action">Lend Book
                  <i class="mdi-content-send right"></i>
                </button>
                </form> 
                <div class="modal-footer">
                  <a href="/home/" class=" modal-action modal-close waves-effect waves-green btn-flat cancel">Cancel</a>
                </div>
            </div>
        </div>
    </div>   
</div>
{% endblock content %}
{% block local_js %}
    
    <script type="text/javascript">
        $(document).ready(function() {
             var date = new Date()
             var lend_date = date.toISOString().substring(0, 10),
             borrowed_date = document.querySelector('#id_borrowed_date');
             borrowed_date.value = lend_date;
              
             // var due_date = new Date()
             due_date = date.setDate(date.getDate() + 14);

             var dd = date.getDate();
             var mm = date.getMonth() + 1;
             var y = date.getFullYear();

             if(mm < 10) 
                mm = "0" + mm;
             if(dd < 10) 
                dd = "0" + dd;

             var someFormattedDate = y + '-' + mm + '-' + dd;
             document.getElementById('id_due_date').value = someFormattedDate;

        });
    </script>
{% endblock local_js %}